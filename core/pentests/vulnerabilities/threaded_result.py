import threading
from .cve_lookup import cve_lookup
def process_string(string):
    # Replace this with your actual string processing logic
    # This example simply capitalizes the string
    return cve_lookup(string)


def worker(strings, results):
    for string in strings:
        result = process_string(string)
        results.append(result)


def split_list(data, num_threads):
    chunk_size = int(len(data) / num_threads)
    if chunk_size == 0:
        chunk_size = 1
    return [data[i:i + chunk_size] for i in range(0, len(data), chunk_size)]


def threaded_string_processing(data, num_threads):
    threads = []
    results = []

    chunks = split_list(data, num_threads)

    # Create and start threads
    for chunk in chunks:
        thread = threading.Thread(target=worker, args=(chunk, results))
        threads.append(thread)
        thread.start()

    # Wait for all threads to finish
    for thread in threads:
        thread.join()

    return results
