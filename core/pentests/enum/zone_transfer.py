import dns.resolver
import dns.query
import dns.zone

def get_nameserver_ip(nameserver):
        # Perform a DNS query to get the IP address of the nameserver
        result = dns.resolver.resolve(nameserver, 'A')
        return result[0].address
    

def zone_transfer(domain, nameserver):
    nameserver_ip = get_nameserver_ip(nameserver)
    if nameserver_ip:

            # Use the resolved IP address for the DNS query
            resolver = dns.resolver.Resolver()
            resolver.nameservers = [nameserver_ip]

            # Perform a DNS query to get the zone
            zone = dns.zone.from_xfr(dns.query.xfr(nameserver_ip, domain))

            return zone.iterate_rdatas()
            
      
